<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Trello Reports ‚Äì Connector</title>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <style>
    /* Fallback vis√≠vel somente quando abrir fora do Trello */
    body { font-family: Inter, system-ui, Arial; padding: 12px; }
    #fallback { display: none; }
  </style>
</head>
<body>
  <div id="fallback">
    <h3>Conector carregado ‚úÖ</h3>
    <p>Este arquivo √© usado pelo Trello. Para testar manualmente o dashboard:</p>
    <p><a href="/index.html">‚û°Ô∏è Abrir Dashboard</a></p>
  </div>

  <script>
    if (window.TrelloPowerUp) {
      window.TrelloPowerUp.initialize(
        {
          /* 1) Bot√£o no topo (menu de Power-Ups da board) */
          'board-buttons': (t) => [{
            text: 'üìä Dashboard',
            condition: 'always',
            callback: () => t.modal({
              url: t.signUrl('/index.html'),
              title: 'Trello Reports',
              fullscreen: true
            })
          }],

          /* 2) Aba em Views/Visualiza√ß√µes (se sua conta tiver o recurso) */
          'board-views': (t) => Promise.resolve([
            { title: 'üìä Dashboard', url: t.signUrl('/index.html') }
          ]),

          /* 3) Bot√£o dentro de cada cart√£o (garantia visual dentro do card) */
          'card-buttons': (t) => [{
            text: 'üìä Dashboard',
            callback: () => t.modal({
              url: t.signUrl('/index.html'),
              title: 'Trello Reports',
              fullscreen: true
            })
          }],

          /* 4) Settings (atalho pra abrir o painel a partir de Configura√ß√µes) */
          'show-settings': (t) => t.modal({
            url: t.signUrl('/settings.html'),
            title: 'Configura√ß√µes ‚Äì Trello Reports',
            height: 260
          })
        },
        { appName: 'Trello Reports' }
      );
    } else {
      /* Quando aberto fora do Trello */
      document.getElementById('fallback').style.display = 'block';
    }
  </script>
</body>
</html>
