<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="robots" content="noindex,nofollow" />
    <title>Trello Dashboard</title>

    <!-- SDK oficial do Trello Power-Up -->
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>

  <body>
    <div id="root"></div>

    <!-- ============================
         Registro das capacidades Trello
         ============================ -->
    <script>
      const ICON = {
        dark:  'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white"><rect x="3" y="10" width="4" height="11"/><rect x="10" y="6" width="4" height="15"/><rect x="17" y="3" width="4" height="18"/></svg>',
        light: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black"><rect x="3" y="10" width="4" height="11"/><rect x="10" y="6" width="4" height="15"/><rect x="17" y="3" width="4" height="18"/></svg>'
      };

      // evita registrar múltiplas vezes (recarregamento do React/Vite etc.)
      if (!window.__TRELLO_INITIALIZED__) {
        window.__TRELLO_INITIALIZED__ = true;

        window.TrelloPowerUp.initialize(
          {
            // 🔘 botão no topo do board
            'board-buttons': (t) => [{
              icon: ICON,
              text: '📊 Dashboard',
              condition: 'always',
              callback: () =>
                t.modal({
                  url: t.signUrl('/index.html'),
                  title: '📊 Trello Reports',
                  fullscreen: true
                })
            }],

            // 📊 aba “Visualizações do quadro”
            'board-views': (t) => [
              { title: '📊 Dashboard', url: t.signUrl('/index.html') }
            ],

            // ⚙️ configurações (abre modal igual ao dashboard)
            'show-settings': (t) =>
              t.modal({
                url: t.signUrl('/index.html'),
                title: 'Configurações – Trello Reports',
                fullscreen: true
              })
          },
          { appName: 'Trello Reports' }
        );
      }
    </script>

    <!-- 👇 entrada do app React -->
    <script type="module" src="./src/main.jsx"></script>
  </body>
</html>
